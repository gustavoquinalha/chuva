<div class="audio-player">
  <audio loop #audio>
    <source [src]="mp3Url" type="audio/mp3" />
    Seu navegador não suporta o elemento de áudio.
  </audio>

  <div *ngIf="showElement()" class="fixed left-0 top-0 w-screen h-screen flex justify-center items-center z-80">
    <button (click)="play()" title="Play" *ngIf="!isPlaying()" class="w-12 min-w-12 h-12 bg-zinc-400/90 text-zinc-950/90 hover:bg-zinc-200/90 rounded-full flex items-center justify-center text-center">
      <ng-icon name="heroPlaySolid" size="24"></ng-icon>
    </button>
    <button (click)="pause()" title="Pause" *ngIf="isPlaying()" class="w-12 min-w-12 h-12 bg-zinc-400/90 text-zinc-950/90 hover:bg-zinc-200/90 rounded-full flex items-center justify-center text-center">
      <ng-icon name="heroPauseSolid" size="24"></ng-icon>
    </button>
  </div>

  <div *ngIf="showElement()" class="flex items-center justify-center gap-2 w-full mx-auto fixed left-0 bottom-0 p-4 md:p-8 z-90">
    <div class="flex items-center justify-center gap-2 w-full max-w-4xl mx-auto">

      <select name="select" id="select" class="w-full max-w-32 flex items-center gap-2 px-4 h-14 bg-zinc-950/90 rounded-xl border border-zinc-800/80 text-sm" [(ngModel)]="mp3Url" (change)="changeSelect()">
        <option *ngFor="let item of select" [value]="item.mp3">{{item.name}}</option>
      </select>

      <div class="w-full max-w-96 flex items-center gap-2 px-2 h-14 bg-zinc-950/90 rounded-xl border border-zinc-800/80">
        <div class="controls flex flex-wrap justify-center items-center">
          <button (click)="play()" title="Play" *ngIf="!isPlaying()" class="w-10 min-w-10 h-10 text-zinc-500 hover:text-zinc-200 rounded-lg flex items-center justify-center text-center">
            <ng-icon name="heroPlaySolid" size="22"></ng-icon>
          </button>
          <button (click)="pause()" title="Pause" *ngIf="isPlaying()" class="w-10 min-w-10 h-10 text-zinc-500 hover:text-zinc-200 rounded-lg flex items-center justify-center text-center">
            <ng-icon name="heroPauseSolid" size="24"></ng-icon>
          </button>
        </div>

        <div class="progress-control flex items-center gap-2 text-xs w-full">
          <div class="text-xs text-zinc-500 w-10 text-center flex justify-center items-center">
            {{ formatTime(currentTime) }}
          </div>
          <input type="range" [value]="currentTime" [max]="duration" (input)="seek($event)" />
          <div class="text-xs text-zinc-500 w-10 text-center flex justify-center items-center">
            {{ formatTime(duration) }}
          </div>
        </div>

        <button (click)="repeat()" title="Loop" [class.isLoop]="isLoop()" class="w-10 min-w-10 h-10 text-zinc-500 hover:text-zinc-200 rounded-lg flex items-center justify-center text-center">
          <div class="flex items-center justify-center text-center">
            <ng-icon name="heroArrowPathRoundedSquareSolid" size="24"></ng-icon>
          </div>
        </button>
      </div>

      <div class="volume-control w-full max-w-56 items-center flex gap-2 px-2 h-14 bg-zinc-950/90 rounded-xl border border-zinc-800/80">
        <button (click)="mute()" title="Mute" [ngClass]="{'!text-zinc-200': volume === 0}" class="w-10 min-w-10 h-10 text-zinc-500 hover:text-zinc-200 rounded-lg flex items-center justify-center text-center">
          <ng-icon name="heroSpeakerXMarkSolid" size="24"></ng-icon>
        </button>
        <input type="range"  id="volume" [value]="volume" (input)="changeVolume($event)" min="0" max="1" step="0.01"/>
        <button (click)="setMaxVol()" title="Max volume" [ngClass]="{'!text-zinc-200': volume === 1}" class="w-10 min-w-10 h-10 text-zinc-500 hover:text-zinc-200 rounded-lg flex items-center justify-center text-center">
          <ng-icon name="heroSpeakerWaveSolid" size="24"></ng-icon>
        </button>
      </div>

      <a href="https://github.com/gustavoquinalha/lazy-days" target="_blank" class="flex items-center justify-center text-center w-14 min-w-14 h-14 bg-zinc-950/90 hover:bg-zinc-200/90 text-zinc-200 hover:text-zinc-900 rounded-xl border border-zinc-800/80 text-xs">
        <ng-icon name="heroArrowTopRightOnSquareSolid" size="20"></ng-icon>
      </a>
    </div>
  </div>
</div>

<canvas id="rainCanvas" class="fixed top-0 left-0 -z-10 w-screen h-screen"></canvas>
